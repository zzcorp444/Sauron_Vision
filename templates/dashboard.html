<!-- templates/dashboard.html -->
{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Header -->
    <header class="dashboard-header" id="dashboard-header">
        <div class="header-left" onclick="goToDashboard()">
            <img src="{% static 'images/sv_logo_00.png' %}" alt="SV" class="header-logo">
            <h1>SAURON<span> VISION</span></h1>
            
            <!-- Sauron Info Popup -->
            <div class="sauron-info-popup">
                <div class="popup-header">
                    <span class="popup-title">Sauron Vision System</span>
                    <i class="fas fa-eye" style="color: var(--primary-text);"></i>
                </div>
                <div class="popup-content">
                    <div class="popup-item">
                        <strong>System Status:</strong>
                        <p style="font-size: 0.75rem; color: var(--primary-text); margin: 0;">All systems operational</p>
                    </div>
                    <div class="popup-item">
                        <strong>AI Engine:</strong>
                        <p style="font-size: 0.75rem; color: var(--primary-text); margin: 0;">Running at 99.7% efficiency</p>
                    </div>
                    <div class="popup-item">
                        <strong>Market Coverage:</strong>
                        <p style="font-size: 0.75rem; color: var(--secondary-text); margin: 0;">15 exchanges, 10,000+ assets</p>
                    </div>
                    <div class="popup-item">
                        <strong>Data Latency:</strong>
                        <p style="font-size: 0.75rem; color: var(--primary-text); margin: 0;">< 50ms average</p>
                    </div>
                    <div class="popup-item">
                        <strong>Prediction Accuracy:</strong>
                        <p style="font-size: 0.75rem; color: var(--primary-text); margin: 0;">78.5% (7-day average)</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-center">
            <div class="market-status">
                <span class="status-indicator active"></span>
                <span>MARKET {{ market_status }}</span>
                
                <!-- Market Status Popup -->
                <div class="market-status-popup">
                    <div class="market-group">
                        <h4><i class="fas fa-circle" style="color: var(--primary-text);"></i> Open Markets</h4>
                        <div class="market-list">
                            <div class="market-item open">
                                <span class="market-name">NYSE</span>
                                <span class="market-time">9:30 AM - 4:00 PM EST</span>
                            </div>
                            <div class="market-item open">
                                <span class="market-name">NASDAQ</span>
                                <span class="market-time">9:30 AM - 4:00 PM EST</span>
                            </div>
                            <div class="market-item open">
                                <span class="market-name">London Stock Exchange</span>
                                <span class="market-time">8:00 AM - 4:30 PM GMT</span>
                            </div>
                            <div class="market-item open">
                                <span class="market-name">Crypto (24/7)</span>
                                <span class="market-time">Always Open</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="market-group">
                        <h4><i class="fas fa-circle" style="color: var(--error-text);"></i> Closed Markets</h4>
                        <div class="market-list">
                            <div class="market-item closed">
                                <span class="market-name">Tokyo Stock Exchange</span>
                                <span class="market-time">9:00 AM - 3:00 PM JST</span>
                            </div>
                            <div class="market-item closed">
                                <span class="market-name">Shanghai Exchange</span>
                                <span class="market-time">9:30 AM - 3:00 PM CST</span>
                            </div>
                            <div class="market-item closed">
                                <span class="market-name">Hong Kong Exchange</span>
                                <span class="market-time">9:30 AM - 4:00 PM HKT</span>
                            </div>
                            <div class="market-item closed">
                                <span class="market-name">Sydney Exchange</span>
                                <span class="market-time">10:00 AM - 4:00 PM AEDT</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-right">
            <div class="user-info">
                <div class="settings-icon">
                    <i class="fas fa-cog"></i>
                    <span class="settings-tooltip">Settings</span>
                </div>
                <div class="user-id-wrapper">
                    <span>{{ user.user_id }}</span>
                    <span class="profile-tooltip">Profile</span>
                </div>
                <div class="icon-group">
                    <div class="icon-item {% if active_alerts > 0 %}has-items{% endif %}" id="notification-icon">
                        <i class="fas fa-bell"></i>
                        {% if active_alerts > 0 %}<span class="icon-count">{{ active_alerts }}</span>{% endif %}
                        <div class="icon-popup">
                            <div class="popup-header">
                                <span class="popup-title">Notifications</span>
                                <span style="color: var(--tertiary-text); font-size: 0.8rem;">{{ active_alerts }} new</span>
                            </div>
                            <div class="popup-content">
                                <div class="popup-item">
                                    <strong>Market Alert</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">AAPL reached target price</p>
                                </div>
                                <div class="popup-item">
                                    <strong>Strategy Update</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">Mean Reversion completed backtest</p>
                                </div>
                                <div class="popup-item">
                                    <strong>Risk Warning</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">Portfolio volatility increased</p>
                                </div>
                            </div>
                            <div class="popup-footer">
                                <a href="#" class="view-more-btn">View All Notifications</a>
                            </div>
                        </div>
                    </div>
                    <div class="icon-item" id="activity-icon">
                        <i class="fas fa-chart-line"></i>
                        <div class="icon-popup">
                            <div class="popup-header">
                                <span class="popup-title">Activity</span>
                                <i class="fas fa-thumbs-up" style="color: var(--primary-text);"></i>
                            </div>
                            <div class="popup-content">
                                <div class="popup-item">
                                    <strong>Recent Trades</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">5 trades executed today</p>
                                </div>
                                <div class="popup-item">
                                    <strong>Strategy Performance</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">+2.3% daily return</p>
                                </div>
                                <div class="popup-item">
                                    <strong>Market Scans</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">12 opportunities found</p>
                                </div>
                            </div>
                            <div class="popup-footer">
                                <a href="#" class="view-more-btn">View Activity Log</a>
                            </div>
                        </div>
                    </div>
                    <div class="icon-item {% if active_alerts > 0 %}has-items{% endif %}" id="alerts-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                        {% if active_alerts > 0 %}<span class="icon-count">2</span>{% endif %}
                        <div class="icon-popup">
                            <div class="popup-header">
                                <span class="popup-title">Alerts</span>
                                <span style="color: var(--error-text); font-size: 0.8rem;">2 critical</span>
                            </div>
                            <div class="popup-content">
                                <div class="popup-item">
                                    <strong style="color: var(--error-text);">Risk Limit Breach</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">Portfolio beta exceeded 1.5</p>
                                </div>
                                <div class="popup-item">
                                    <strong style="color: var(--warning-text);">Anomaly Detected</strong>
                                    <p style="font-size: 0.75rem; color: var(--tertiary-text); margin: 0;">Unusual volume on TSLA</p>
                                </div>
                            </div>
                            <div class="popup-footer">
                                <a href="#" class="view-more-btn">View All Alerts</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <a href="{% url 'logout' %}" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
        
        <!-- Activity Ticker Bar -->
        <div class="activity-ticker-bar" id="activity-ticker-bar">
            <div class="activity-ticker" id="activity-ticker">
                <div class="activity-item">
                    <i class="fas fa-robot"></i>
                    <span>AI Analysis Running</span>
                    <div class="activity-detail">Processing market patterns for 15 symbols</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-sync"></i>
                    <span>Strategy Optimization</span>
                    <div class="activity-detail">Backtesting momentum strategy parameters</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-bell"></i>
                    <span>Fed Meeting Today</span>
                    <div class="activity-detail">Interest rate decision at 2:00 PM EST</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-database"></i>
                    <span>Data Collection Active</span>
                    <div class="activity-detail">Scraping 50+ sources in real-time</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Risk Monitor Alert</span>
                    <div class="activity-detail">VaR approaching threshold on 3 positions</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-brain"></i>
                    <span>Sentiment Analysis</span>
                    <div class="activity-detail">Processing 10,000+ social media posts</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Pattern Detection</span>
                    <div class="activity-detail">Head and shoulders forming on SPY</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-satellite"></i>
                    <span>Alternative Data</span>
                    <div class="activity-detail">Satellite imagery processed for retail traffic</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-network-wired"></i>
                    <span>Correlation Update</span>
                    <div class="activity-detail">Cross-asset correlations recalculated</div>
                </div>
                <div class="activity-item">
                    <i class="fas fa-server"></i>
                    <span>System Performance</span>
                    <div class="activity-detail">All systems operating at peak efficiency</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard Layout -->
    <div class="dashboard-layout">
        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <nav class="nav-menu">
                    <a href="#" class="nav-item active" data-section="vision">
                        <div class="nav-category">
                            <i class="fas fa-eye"></i>
                            <span class="nav-category-name">Vision</span>
                        </div>
                        <span class="nav-subtitle">Overview/Dashboard</span>
                    </a>
                    <a href="#" class="nav-item" data-section="market">
                        <div class="nav-category">
                            <i class="fas fa-search"></i>
                            <span class="nav-category-name">Market</span>
                        </div>
                        <span class="nav-subtitle">Scanner & Intelligence</span>
                    </a>
                    <a href="#" class="nav-item" data-section="strategy">
                        <div class="nav-category">
                            <i class="fas fa-cogs"></i>
                            <span class="nav-category-name">Strategy</span>
                        </div>
                        <span class="nav-subtitle">Builder & Generation</span>
                    </a>
                    <a href="#" class="nav-item" data-section="risk">
                        <div class="nav-category">
                            <i class="fas fa-shield-alt"></i>
                            <span class="nav-category-name">Risk</span>
                        </div>
                        <span class="nav-subtitle">Management & Metrics</span>
                    </a>
                    <a href="#" class="nav-item" data-section="sentiment">
                        <div class="nav-category">
                            <i class="fas fa-brain"></i>
                            <span class="nav-category-name">Sentiment</span>
                        </div>
                        <span class="nav-subtitle">Analysis & Indicators</span>
                    </a>
                    <a href="#" class="nav-item" data-section="execution">
                        <div class="nav-category">
                            <i class="fas fa-bolt"></i>
                            <span class="nav-category-name">Execution</span>
                        </div>
                        <span class="nav-subtitle">Trading & Orders</span>
                    </a>
                    <a href="#" class="nav-item" data-section="anomaly">
                        <div class="nav-category">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span class="nav-category-name">Anomaly</span>
                        </div>
                        <span class="nav-subtitle">Detection & Alerts</span>
                    </a>
                    <a href="#" class="nav-item" data-section="terminal">
                        <div class="nav-category">
                            <i class="fas fa-terminal"></i>
                            <span class="nav-category-name">Terminal</span>
                        </div>
                        <span class="nav-subtitle">Console Interface</span>
                    </a>
                </nav>
            </aside>

            <!-- News Intelligence Bar - Below Sidebar -->
            <div class="news-intelligence-bar" id="news-bar">
                <button class="news-bar-toggle" onclick="toggleNewsBar()">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <div class="news-bar-header">
                    <div class="news-bar-title">
                        <i class="fas fa-newspaper"></i>
                        <span>Market Intelligence</span>
                    </div>
                    <div class="news-bar-controls">
                        <button class="news-filter-btn active" data-filter="all">All</button>
                        <button class="news-filter-btn" data-filter="news">News</button>
                        <button class="news-filter-btn" data-filter="social">Social</button>
                        <button class="news-filter-btn" data-filter="analysis">Analysis</button>
                        <button class="news-filter-btn" data-filter="alerts">Alerts</button>
                    </div>
                </div>
                
                <div class="news-content">
                    <!-- News Items -->
                    <div class="news-item" data-type="news">
                        <div class="news-source">
                            <span class="news-source-name">Bloomberg</span>
                            <span class="news-time">2 min ago</span>
                        </div>
                        <h4 class="news-headline">Fed Signals Pause in Rate Hikes as Inflation Shows Signs of Cooling</h4>
                        <p class="news-summary">Federal Reserve officials indicated they may hold interest rates steady in the upcoming meeting...</p>
                        <div class="news-meta">
                            <div class="sentiment-indicator positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>Bullish</span>
                            </div>
                            <div class="social-metrics">
                                <span class="social-metric"><i class="fab fa-twitter"></i> 1.2k</span>
                                <span class="social-metric"><i class="fas fa-comments"></i> 342</span>
                            </div>
                        </div>
                        <div class="news-tags">
                            <span class="news-tag">Fed</span>
                            <span class="news-tag">Rates</span>
                            <span class="news-tag ticker">SPY</span>
                        </div>
                    </div>
                    
                    <div class="news-item" data-type="social">
                        <div class="news-source">
                            <span class="news-source-name">Reddit - WSB</span>
                            <span class="news-time">5 min ago</span>
                        </div>
                        <h4 class="news-headline">Unusual Options Activity Detected on NVDA</h4>
                        <p class="news-summary">Massive call option purchases for NVDA $500 strike...</p>
                        <div class="news-meta">
                            <div class="sentiment-indicator positive">
                                <i class="fas fa-fire"></i>
                                <span>Hot</span>
                            </div>
                            <div class="social-metrics">
                                <span class="social-metric"><i class="fas fa-arrow-up"></i> 5.8k</span>
                            </div>
                        </div>
                        <div class="news-tags">
                            <span class="news-tag ticker">NVDA</span>
                            <span class="news-tag">Options</span>
                        </div>
                    </div>
                    
                    <div class="news-item" data-type="analysis">
                        <div class="news-source">
                            <span class="news-source-name">Sauron AI</span>
                            <span class="news-time">10 min ago</span>
                        </div>
                        <h4 class="news-headline">Pattern Alert: AAPL Ascending Triangle</h4>
                        <p class="news-summary">Bullish pattern formation with 85% success rate...</p>
                        <div class="news-meta">
                            <div class="sentiment-indicator positive">
                                <i class="fas fa-chart-line"></i>
                                <span>Buy Signal</span>
                            </div>
                        </div>
                        <div class="news-tags">
                            <span class="news-tag ticker">AAPL</span>
                            <span class="news-tag">Technical</span>
                        </div>
                    </div>
                    
                    <div class="news-item" data-type="news">
                        <div class="news-source">
                            <span class="news-source-name">Reuters</span>
                            <span class="news-time">15 min ago</span>
                        </div>
                        <h4 class="news-headline">Tesla Q4 Deliveries Beat Estimates</h4>
                        <p class="news-summary">484,507 vehicles delivered, beating expectations...</p>
                        <div class="news-meta">
                            <div class="sentiment-indicator positive">
                                <i class="fas fa-rocket"></i>
                                <span>Bullish</span>
                            </div>
                        </div>
                        <div class="news-tags">
                            <span class="news-tag ticker">TSLA</span>
                            <span class="news-tag">Earnings</span>
                        </div>
                    </div>
                    
                    <!-- More news items... -->
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Vision (Overview) Section -->
                <section id="vision" class="content-section active">
                    <div class="section-header">
                        <h2>Vision Overview</h2>
                        <div class="section-controls">
                            <button class="control-btn">
                                <i class="fas fa-refresh"></i> Refresh
                            </button>
                            <div class="bulk-actions-dropdown">
                                <button class="control-btn">
                                    <i class="fas fa-th"></i> Bulk Actions
                                </button>
                                <div class="bulk-actions-menu">
                                    <div class="bulk-action-item" onclick="expandAllCards()">
                                        <i class="fas fa-expand"></i> Expand All Cards
                                    </div>
                                    <div class="bulk-action-item" onclick="collapseAllCards()">
                                        <i class="fas fa-compress"></i> Collapse All Cards
                                    </div>
                                    <div class="bulk-action-item">
                                        <i class="fas fa-plus"></i> Add Card
                                    </div>
                                    <div class="bulk-action-item">
                                        <i class="fas fa-minus"></i> Remove Card
                                    </div>
                                    <div class="bulk-action-item">
                                        <i class="fas fa-cog"></i> Configure Layout
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="overview-grid">
                        <div class="overview-card" id="portfolio-card">
                            <h3>Portfolio Status</h3>
                            <div class="card-content">
                                <div class="portfolio-grid">
                                    <div class="metric">
                                        <span class="value">$125,847</span>
                                        <span class="label">Total Value</span>
                                    </div>
                                    <div class="metric">
                                        <span class="value">$15,234</span>
                                        <span class="label">Available Cash</span>
                                    </div>
                                    <div class="metric">
                                        <span class="value positive">+2.35%</span>
                                        <span class="label">Today's Change</span>
                                    </div>
                                    <div class="metric">
                                        <span class="value positive">+$2,847</span>
                                        <span class="label">Today's P&L</span>
                                    </div>
                                    <div class="metric">
                                        <span class="value">6</span>
                                        <span class="label">Active Positions</span>
                                    </div>
                                    <div class="metric">
                                        <span class="value warning">Medium</span>
                                        <span class="label">Risk Level</span>
                                    </div>
                                    <div class="metric">
                                        <span class="value">1.15</span>
                                        <span class="label">Portfolio Beta</span>
                                    </div>
                                    <div class="metric">
                                        <span class="value positive">8.7</span>
                                        <span class="label">Portfolio Score</span>
                                    </div>
                                </div>
                                
                                <!-- Portfolio Charts (shown when expanded) -->
                                <div class="portfolio-charts" style="display: none;">
                                    <div class="chart-container">
                                        <div class="chart-title">Value Over Time</div>
                                        <canvas id="portfolio-value-chart"></canvas>
                                    </div>
                                    <div class="chart-container">
                                        <div class="chart-title">Asset Allocation</div>
                                        <canvas id="portfolio-allocation-chart"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button class="card-control-btn" onclick="toggleCardSize(this)">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="card-control-btn">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="overview-card large">
                            <h3>Portfolio</h3>
                            <div class="card-content">
                                <!-- Active Positions Section -->
                                <h4 style="color: var(--secondary-text); font-size: 0.95rem; margin-bottom: 0.8rem;">Active Positions</h4>
                                <div class="position-list">
                                    <div class="position-item">
                                        <div class="position-header" data-holding-time="Holding: 3d 5h">
                                            <div class="position-symbol-info">
                                                <span class="position-side buy">BUY</span>
                                                <span class="symbol">AAPL</span>
                                            </div>
                                            <div>
                                                <span class="value">$150.25</span>
                                                <span class="change positive">+1.25%</span>
                                            </div>
                                        </div>
                                        <div class="position-details">
                                            <div class="position-prices">
                                                <div class="price-info">
                                                    <span class="price-label">Bid</span>
                                                    <span class="price-value">$150.20</span>
                                                </div>
                                                <div class="price-info">
                                                    <span class="price-label">Ask</span>
                                                    <span class="price-value">$150.30</span>
                                                </div>
                                            </div>
                                            <div class="mini-chart-container">
                                                <div class="mini-chart">
                                                    <svg class="chart-svg" viewBox="0 0 100 40">
                                                        <polyline class="price-line" points="0,35 10,33 20,30 30,32 40,28 50,26 60,24 70,22 80,20 90,18 100,16" />
                                                        <rect class="volume-bars" x="0" y="36" width="8" height="4" />
                                                        <rect class="volume-bars" x="10" y="34" width="8" height="6" />
                                                        <rect class="volume-bars" x="20" y="35" width="8" height="5" />
                                                        <rect class="volume-bars" x="30" y="33" width="8" height="7" />
                                                        <rect class="volume-bars" x="40" y="36" width="8" height="4" />
                                                        <rect class="volume-bars" x="50" y="34" width="8" height="6" />
                                                        <rect class="volume-bars" x="60" y="35" width="8" height="5" />
                                                        <rect class="volume-bars" x="70" y="34" width="8" height="6" />
                                                        <rect class="volume-bars" x="80" y="36" width="8" height="4" />
                                                        <rect class="volume-bars" x="90" y="35" width="8" height="5" />
                                                    </svg>
                                                </div>
                                                <div class="position-data">
                                                    <div class="data-row">
                                                        <span class="data-label">Risk:</span>
                                                        <span class="data-value">Low</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Sentiment:</span>
                                                        <span class="data-value">Bullish</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Action:</span>
                                                        <span class="data-value">Hold</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Target:</span>
                                                        <span class="data-value">$165</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="position-actions">
                                                <a href="#" class="position-action-btn">
                                                    <i class="fas fa-chart-line"></i> Chart
                                                </a>
                                                <a href="#" class="position-action-btn">
                                                    <i class="fas fa-info-circle"></i> Details
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="position-item">
                                        <div class="position-header" data-holding-time="Holding: 1d 12h">
                                            <div class="position-symbol-info">
                                                <span class="position-side sell">SELL</span>
                                                <span class="symbol">GOOGL</span>
                                            </div>
                                            <div>
                                                <span class="value">$2750.50</span>
                                                <span class="change negative">-0.75%</span>
                                            </div>
                                        </div>
                                        <div class="position-details">
                                            <div class="position-prices">
                                                <div class="price-info">
                                                    <span class="price-label">Bid</span>
                                                    <span class="price-value">$2750.25</span>
                                                </div>
                                                <div class="price-info">
                                                    <span class="price-label">Ask</span>
                                                    <span class="price-value">$2750.75</span>
                                                </div>
                                            </div>
                                            <div class="mini-chart-container">
                                                <div class="mini-chart">
                                                    <svg class="chart-svg" viewBox="0 0 100 40">
                                                        <polyline class="price-line" points="0,10 10,12 20,15 30,13 40,18 50,20 60,22 70,24 80,26 90,28 100,30" />
                                                        <rect class="volume-bars" x="0" y="36" width="8" height="4" />
                                                        <rect class="volume-bars" x="10" y="34" width="8" height="6" />
                                                        <rect class="volume-bars" x="20" y="37" width="8" height="3" />
                                                        <rect class="volume-bars" x="30" y="33" width="8" height="7" />
                                                        <rect class="volume-bars" x="40" y="35" width="8" height="5" />
                                                        <rect class="volume-bars" x="50" y="34" width="8" height="6" />
                                                        <rect class="volume-bars" x="60" y="36" width="8" height="4" />
                                                        <rect class="volume-bars" x="70" y="35" width="8" height="5" />
                                                        <rect class="volume-bars" x="80" y="36" width="8" height="4" />
                                                        <rect class="volume-bars" x="90" y="35" width="8" height="5" />
                                                    </svg>
                                                </div>
                                                <div class="position-data">
                                                    <div class="data-row">
                                                        <span class="data-label">Risk:</span>
                                                        <span class="data-value">Medium</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Sentiment:</span>
                                                        <span class="data-value">Bearish</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Action:</span>
                                                        <span class="data-value">Watch</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Target:</span>
                                                        <span class="data-value">$2650</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="position-actions">
                                                <a href="#" class="position-action-btn">
                                                    <i class="fas fa-chart-line"></i> Chart
                                                </a>
                                                <a href="#" class="position-action-btn">
                                                    <i class="fas fa-info-circle"></i> Details
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="position-item">
                                        <div class="position-header" data-holding-time="Holding: 5h 22m">
                                            <div class="position-symbol-info">
                                                <span class="position-side buy">BUY</span>
                                                <span class="symbol">TSLA</span>
                                            </div>
                                            <div>
                                                <span class="value">$850.75</span>
                                                <span class="change positive">+3.10%</span>
                                            </div>
                                        </div>
                                        <div class="position-details">
                                            <div class="position-prices">
                                                <div class="price-info">
                                                    <span class="price-label">Bid</span>
                                                    <span class="price-value">$850.50</span>
                                                </div>
                                                <div class="price-info">
                                                    <span class="price-label">Ask</span>
                                                    <span class="price-value">$851.00</span>
                                                </div>
                                            </div>
                                            <div class="mini-chart-container">
                                                <div class="mini-chart">
                                                    <svg class="chart-svg" viewBox="0 0 100 40">
                                                        <polyline class="price-line" points="0,38 10,35 20,32 30,29 40,26 50,23 60,20 70,17 80,14 90,11 100,8" />
                                                        <rect class="volume-bars" x="0" y="36" width="8" height="4" />
                                                        <rect class="volume-bars" x="10" y="32" width="8" height="8" />
                                                        <rect class="volume-bars" x="20" y="34" width="8" height="6" />
                                                        <rect class="volume-bars" x="30" y="31" width="8" height="9" />
                                                        <rect class="volume-bars" x="40" y="33" width="8" height="7" />
                                                        <rect class="volume-bars" x="50" y="32" width="8" height="8" />
                                                        <rect class="volume-bars" x="60" y="34" width="8" height="6" />
                                                        <rect class="volume-bars" x="70" y="33" width="8" height="7" />
                                                        <rect class="volume-bars" x="80" y="32" width="8" height="8" />
                                                        <rect class="volume-bars" x="90" y="31" width="8" height="9" />
                                                    </svg>
                                                </div>
                                                <div class="position-data">
                                                    <div class="data-row">
                                                        <span class="data-label">Risk:</span>
                                                        <span class="data-value">High</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Sentiment:</span>
                                                        <span class="data-value">Very Bullish</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Action:</span>
                                                        <span class="data-value">Buy</span>
                                                    </div>
                                                    <div class="data-row">
                                                        <span class="data-label">Target:</span>
                                                        <span class="data-value">$875</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="position-actions">
                                                <a href="#" class="position-action-btn">
                                                    <i class="fas fa-chart-line"></i> Chart
                                                </a>
                                                <a href="#" class="position-action-btn">
                                                    <i class="fas fa-info-circle"></i> Details
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Enhanced Orders to Market Section -->
                                <div class="orders-section">
                                    <h4 style="color: var(--primary-text); font-size: 0.95rem;">Orders to Market</h4>
                                    
                                    <div class="order-item">
                                        <div class="order-basic-info">
                                            <span class="order-type buy">BUY</span>
                                            <span>TSLA @ $845.00</span>
                                            <span>100 shares</span>
                                            <span style="color: var(--tertiary-text);">Pending</span>
                                        </div>
                                        <div class="order-detailed-info">
                                            <div class="order-details-grid">
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Order Type:</span>
                                                    <span class="order-detail-value">Limit Order</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Total Value:</span>
                                                    <span class="order-detail-value">$84,500.00</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Time in Force:</span>
                                                    <span class="order-detail-value">Day</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Placed:</span>
                                                    <span class="order-detail-value">09:35:42</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Current Price:</span>
                                                    <span class="order-detail-value">$850.75</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Distance:</span>
                                                    <span class="order-detail-value">-$5.75</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="order-item">
                                        <div class="order-basic-info">
                                            <span class="order-type sell">SELL</span>
                                            <span>MSFT @ $305.00</span>
                                            <span>50 shares</span>
                                            <span style="color: var(--tertiary-text);">Limit</span>
                                        </div>
                                        <div class="order-detailed-info">
                                            <div class="order-details-grid">
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Order Type:</span>
                                                    <span class="order-detail-value">Limit Order</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Total Value:</span>
                                                    <span class="order-detail-value">$15,250.00</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Time in Force:</span>
                                                    <span class="order-detail-value">GTC</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Placed:</span>
                                                    <span class="order-detail-value">Yesterday</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Current Price:</span>
                                                    <span class="order-detail-value">$300.40</span>
                                                </div>
                                                <div class="order-detail-item">
                                                    <span class="order-detail-label">Distance:</span>
                                                    <span class="order-detail-value">+$4.60</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button class="card-control-btn" onclick="toggleCardSize(this)">
                                    <i class="fas fa-compress"></i>
                                </button>
                                <button class="card-control-btn">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="signals-overview overview-card large">
                            <h3>Trading Signals</h3>
                            <div class="card-content">
                                <div class="signals-sections">
                                    <!-- Ongoing Signals -->
                                    <div class="signal-section">
                                        <h4><i class="fas fa-play-circle"></i> Ongoing Signals</h4>
                                        <div class="signal-section-list">
                                            <div class="signal-item">
                                                <div class="signal-summary">
                                                    <div class="signal-info">
                                                        <span class="signal-type buy">BUY</span>
                                                        <span class="signal-symbol">TSLA</span>
                                                    </div>
                                                    <div class="signal-meta">
                                                        <span class="signal-tier">
                                                            <span class="tier-stars">★★★★☆</span> Tier 4
                                                        </span>
                                                        <span class="signal-time">2h 15m ago</span>
                                                    </div>
                                                </div>
                                                <div class="signal-full-details">
                                                    <div class="signal-details">
                                                        <div class="detail-row">
                                                            <span class="detail-label">Probability:</span>
                                                            <span class="detail-value">85%</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Portfolio %:</span>
                                                            <span class="detail-value">12.5%</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Multiplier:</span>
                                                            <span class="detail-value">2.5x</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Est. ROI:</span>
                                                            <span class="detail-value">+15.2%</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Target Move:</span>
                                                            <span class="detail-value">+$25.50</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Hold Time:</span>
                                                            <span class="detail-value">3-5 days</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Entry:</span>
                                                            <span class="detail-value">$845.20</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Stop Loss:</span>
                                                            <span class="detail-value">$825.00</span>
                                                        </div>
                                                    </div>
                                                    <div class="signal-actions">
                                                        <button class="execute-btn">Execute Trade</button>
                                                        <button class="delete-signal-btn">
                                                            <i class="fas fa-times"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="signal-item">
                                                <div class="signal-summary">
                                                    <div class="signal-info">
                                                        <span class="signal-type sell">SELL</span>
                                                        <span class="signal-symbol">META</span>
                                                    </div>
                                                    <div class="signal-meta">
                                                        <span class="signal-tier">
                                                            <span class="tier-stars">★★★☆☆</span> Tier 3
                                                        </span>
                                                        <span class="signal-time">45m ago</span>
                                                    </div>
                                                </div>
                                                <div class="signal-full-details">
                                                    <div class="signal-details">
                                                        <div class="detail-row">
                                                            <span class="detail-label">Probability:</span>
                                                            <span class="detail-value">72%</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Portfolio %:</span>
                                                            <span class="detail-value">8.0%</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Multiplier:</span>
                                                            <span class="detail-value">1.8x</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Est. ROI:</span>
                                                            <span class="detail-value">+8.5%</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Target Move:</span>
                                                            <span class="detail-value">-$18.30</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Hold Time:</span>
                                                            <span class="detail-value">1-2 days</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Entry:</span>
                                                            <span class="detail-value">$325.60</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Stop Loss:</span>
                                                            <span class="detail-value">$335.00</span>
                                                        </div>
                                                    </div>
                                                    <div class="signal-actions">
                                                        <button class="execute-btn">Execute Trade</button>
                                                        <button class="delete-signal-btn">
                                                            <i class="fas fa-times"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Pending Signals -->
                                    <div class="signal-section">
                                        <h4><i class="fas fa-clock"></i> Pending Signals</h4>
                                        <div class="signal-section-list">
                                            <div class="signal-item">
                                                <div class="signal-summary">
                                                    <div class="signal-info">
                                                        <span class="signal-type watch">WATCH</span>
                                                        <span class="signal-symbol">NVDA</span>
                                                    </div>
                                                    <div class="signal-meta">
                                                        <span class="signal-tier">
                                                            <span class="tier-stars">★★★★★</span> Tier 5
                                                        </span>
                                                        <span class="signal-time">Trigger: $455.00</span>
                                                    </div>
                                                </div>
                                                <div class="signal-full-details">
                                                    <div class="signal-details">
                                                        <div class="detail-row">
                                                            <span class="detail-label">Trigger Price:</span>
                                                            <span class="detail-value">$455.00</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Current Price:</span>
                                                            <span class="detail-value">$450.30</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Direction:</span>
                                                            <span class="detail-value">BUY on breakout</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Pattern:</span>
                                                            <span class="detail-value">Cup & Handle</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Target 1:</span>
                                                            <span class="detail-value">$470.00</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Target 2:</span>
                                                            <span class="detail-value">$485.00</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Volume Req:</span>
                                                            <span class="detail-value">> 30M</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Valid Until:</span>
                                                            <span class="detail-value">48 hours</span>
                                                        </div>
                                                    </div>
                                                    <div class="signal-actions">
                                                        <button class="execute-btn">Set Alert</button>
                                                        <button class="delete-signal-btn">
                                                            <i class="fas fa-times"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Historical Performance -->
                                    <div class="signal-section">
                                        <h4><i class="fas fa-history"></i> Recent Performance</h4>
                                        <div class="signal-section-list">
                                            <div class="signal-item">
                                                <div class="signal-summary">
                                                    <div class="signal-info">
                                                        <span class="signal-type hedge">HEDGE</span>
                                                        <span class="signal-symbol">SPY/VIX</span>
                                                    </div>
                                                    <div class="signal-meta">
                                                        <span class="signal-tier">
                                                            <span class="tier-stars">★★★★☆</span> Closed
                                                        </span>
                                                        <span class="signal-time">+12.3% ROI</span>
                                                    </div>
                                                </div>
                                                <div class="signal-full-details">
                                                    <div class="signal-details">
                                                        <div class="detail-row">
                                                            <span class="detail-label">Strategy:</span>
                                                            <span class="detail-value">Volatility Hedge</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Entry Date:</span>
                                                            <span class="detail-value">Dec 12, 2024</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Exit Date:</span>
                                                            <span class="detail-value">Dec 15, 2024</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Duration:</span>
                                                            <span class="detail-value">3 days</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Entry SPY:</span>
                                                            <span class="detail-value">$435.20</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Exit SPY:</span>
                                                            <span class="detail-value">$428.50</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">VIX Entry:</span>
                                                            <span class="detail-value">15.20</span>
                                                        </div>
                                                        <div class="detail-row">
                                                            <span class="detail-label">Net Profit:</span>
                                                            <span class="detail-value">+$3,450.00</span>
                                                        </div>
                                                    </div>
                                                    <div class="signal-actions">
                                                        <button class="execute-btn">View Analysis</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button class="card-control-btn" onclick="toggleCardSize(this)">
                                    <i class="fas fa-compress"></i>
                                </button>
                                <button class="card-control-btn">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Additional Overview Cards (3-6 new ones) -->

                        <!-- News Intelligence Card -->
                        <div class="overview-card news-analysis-card">
                            <h3><i class="fas fa-newspaper"></i> News Intelligence & Impact</h3>
                            <div class="card-content">
                                <div class="news-summary">
                                    <div class="summary-metric">
                                        <span class="summary-value positive">72%</span>
                                        <span class="summary-label">Overall Sentiment</span>
                                    </div>
                                    <div class="summary-metric">
                                        <span class="summary-value">247</span>
                                        <span class="summary-label">Articles Today</span>
                                    </div>
                                    <div class="summary-metric">
                                        <span class="summary-value warning">High</span>
                                        <span class="summary-label">Market Impact</span>
                                    </div>
                                    <div class="summary-metric">
                                        <span class="summary-value">15</span>
                                        <span class="summary-label">Breaking News</span>
                                    </div>
                                </div>
                                
                                <h4 style="margin-top: 1rem; color: var(--primary-text); font-size: 0.95rem;">High Impact News</h4>
                                <div class="news-impact-list">
                                    <div class="impact-item">
                                        <div class="impact-details">
                                            <div class="impact-headline">Fed Signals Pause in Rate Hikes</div>
                                            <div class="impact-source">Bloomberg • 15 min ago</div>
                                        </div>
                                        <div class="impact-score">
                                            <span class="score-value positive">+8.5</span>
                                            <span class="score-label">Impact</span>
                                        </div>
                                    </div>
                                    
                                    <div class="impact-item">
                                        <div class="impact-details">
                                            <div class="impact-headline">Tesla Beats Q4 Delivery Estimates</div>
                                            <div class="impact-source">Reuters • 1 hour ago</div>
                                        </div>
                                        <div class="impact-score">
                                            <span class="score-value positive">+6.2</span>
                                            <span class="score-label">Impact</span>
                                        </div>
                                    </div>
                                    
                                    <div class="impact-item">
                                        <div class="impact-details">
                                            <div class="impact-headline">China Tech Regulatory Concerns Rise</div>
                                            <div class="impact-source">WSJ • 2 hours ago</div>
                                        </div>
                                        <div class="impact-score">
                                            <span class="score-value negative">-4.8</span>
                                            <span class="score-label">Impact</span>
                                        </div>
                                    </div>
                                    
                                    <div class="impact-item">
                                        <div class="impact-details">
                                            <div class="impact-headline">AI Chip Demand Exceeds Supply</div>
                                            <div class="impact-source">TechCrunch • 3 hours ago</div>
                                        </div>
                                        <div class="impact-score">
                                            <span class="score-value positive">+7.1</span>
                                            <span class="score-label">Impact</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                                    <h4 style="color: var(--primary-text); font-size: 0.95rem; margin-bottom: 0.5rem;">Trending Topics</h4>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                        <span style="padding: 0.3rem 0.6rem; background: var(--accent-bg); border-radius: 15px; font-size: 0.8rem; color: var(--secondary-text);">#Fed</span>
                                        <span style="padding: 0.3rem 0.6rem; background: var(--accent-bg); border-radius: 15px; font-size: 0.8rem; color: var(--secondary-text);">#AI</span>
                                        <span style="padding: 0.3rem 0.6rem; background: var(--accent-bg); border-radius: 15px; font-size: 0.8rem; color: var(--secondary-text);">#Tesla</span>
                                        <span style="padding: 0.3rem 0.6rem; background: var(--accent-bg); border-radius: 15px; font-size: 0.8rem; color: var(--secondary-text);">#Earnings</span>
                                        <span style="padding: 0.3rem 0.6rem; background: var(--accent-bg); border-radius: 15px; font-size: 0.8rem; color: var(--secondary-text);">#China</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button class="card-control-btn" onclick="toggleCardSize(this)">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="card-control-btn">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 1. Machine Learning Models Card -->
                        <div class="overview-card">
                            <h3>ML Model Performance</h3>
                            <div class="card-content">
                                <div class="ai-insight">
                                    <span class="insight-label">Prediction Model:</span>
                                    <span class="insight-value positive">98.5% accuracy</span>
                                </div>
                                <div class="ai-insight">
                                    <span class="insight-label">Neural Network:</span>
                                    <span class="insight-value">Training complete</span>
                                </div>
                                <div class="ai-insight">
                                    <span class="insight-label">Feature Engineering:</span>
                                    <span class="insight-value positive">345 features active</span>
                                </div>
                                <div class="ai-insight">
                                    <span class="insight-label">Model Drift:</span>
                                    <span class="insight-value">Within tolerance</span>
                                </div>
                                <div class="ai-insight">
                                    <span class="insight-label">Learning Rate:</span>
                                    <span class="insight-value positive">Optimal (0.001)</span>
                                </div>
                            </div>
                            <div class="card-controls">
                                <button class="card-control-btn" onclick="toggleCardSize(this)">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="card-control-btn">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Keep all remaining cards... -->
                        
                    </div>
                </section>
                
                <!-- Market Section -->
                <section id="market" class="content-section">
                    <div class="section-header">
                        <h2>Market Scanner & Intelligence</h2>
                        <div class="section-controls">
                            <button class="control-btn">
                                <i class="fas fa-refresh"></i> Refresh
                            </button>
                            <button class="control-btn">
                                <i class="fas fa-filter"></i> Filters
                            </button>
                            <button class="control-btn">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    
                    <!-- Keep all market content... -->
                </section>

                <!-- Other sections remain the same... -->
                
                <!-- Terminal Section -->
                <section id="terminal" class="content-section">
                    {% include 'components/terminal.html' %}
                </section>
            </div>
        </main>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/dashboard.js' %}"></script>
<script>
// Handle scrolling for header transparency
window.addEventListener('scroll', function() {
    const header = document.getElementById('dashboard-header');
    const activityBar = document.getElementById('activity-ticker-bar');
    
    if (window.scrollY > 50) {
        header.classList.add('scrolled');
        activityBar.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
        activityBar.classList.remove('scrolled');
    }
});

// Go to dashboard function
function goToDashboard() {
    window.location.href = "{% url 'dashboard' %}";
}

// Fixed sidebar toggle functionality
document.getElementById('sidebar-toggle').addEventListener('click', function() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('retracted');
});

// News bar toggle
function toggleNewsBar() {
    const newsBar = document.getElementById('news-bar');
    newsBar.classList.toggle('visible');
}

// News filter functionality
document.querySelectorAll('.news-filter-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        document.querySelectorAll('.news-filter-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        const filter = this.dataset.filter;
        document.querySelectorAll('.news-item').forEach(item => {
            if (filter === 'all' || item.dataset.type === filter) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    });
});

// Card size toggle functionality
function toggleCardSize(button) {
    const card = button.closest('.overview-card');
    const icon = button.querySelector('i');
    
    card.classList.toggle('expanded');
    
    if (card.classList.contains('expanded')) {
        icon.className = 'fas fa-compress';
        // Show additional content if portfolio card
        if (card.id === 'portfolio-card') {
            card.querySelector('.portfolio-charts').style.display = 'grid';
        }
    } else {
        icon.className = 'fas fa-expand';
        // Hide additional content if portfolio card
        if (card.id === 'portfolio-card') {
            card.querySelector('.portfolio-charts').style.display = 'none';
        }
    }
}

// Bulk actions
function expandAllCards() {
    document.querySelectorAll('.overview-card').forEach(card => {
        card.classList.add('expanded');
        const btn = card.querySelector('.card-control-btn i');
        if (btn) btn.className = 'fas fa-compress';
    });
}

function collapseAllCards() {
    document.querySelectorAll('.overview-card').forEach(card => {
        card.classList.remove('expanded');
        const btn = card.querySelector('.card-control-btn i');
        if (btn) btn.className = 'fas fa-expand';
    });
}

// Make news items clickable
document.querySelectorAll('.news-item').forEach(item => {
    item.addEventListener('click', function() {
        console.log('Opening article...');
    });
});
</script>
{% endblock %}